<div class="trader-form-container">
    <div class="description-panel">
        <div *ngIf="hoveredField">
        <div class="hovered-title">{{ hoveredField }}</div>
        <div class="hovered-description"> {{ TraderFieldDescriptions[hoveredField] }}</div>
        </div>
        <div *ngIf="!hoveredField">
            <div class="hovered-title">{{ selected_option }}</div>
            <div class="hovered-description">{{ AlgoDescriptions[selected_option] }}</div>
        </div>
    </div>

    <div class="form-panel">
        <div *ngIf="errorMessage" class="error-banner">
            {{ errorMessage }}
        </div>
        <form [formGroup]="trader_creation_form">
            <div>
                <label for="trader_type">Trader Type:</label>
                <select formControlName="trader_type" id="trader_type" [(ngModel)]="selected_option"
                    (mouseenter)="setHoveredField('trader_type')" 
                    (mouseleave)="clearHoveredField()">
                    <option *ngFor="let type of trader_types" [value]="type">{{ type }}</option>
                </select>   
            </div>
            <div>
                <label for="name">Name:</label>
                <input type="text" id="name" formControlName="name" 
                    (mouseenter)="setHoveredField('name')" 
                    (mouseleave)="clearHoveredField()">
            </div>  
            <div>
                <label for="cash">Cash:</label>
                <input type="text" id="cash" formControlName="cash"
                    (mouseenter)="setHoveredField('cash')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div>
                <label for="data_frequency">Data Frequency:</label>
                <div formGroupName="data_frequency"
                        (mouseenter)="setHoveredField('data_frequency')" 
                        (mouseleave)="clearHoveredField()">
                    <label>Days:</label>
                    <input type="number" formControlName="days">
                
                    <label>Hours:</label>
                    <input type="number" formControlName="hours">
                
                    <label>Minutes:</label>
                    <input type="number" formControlName="minutes">
                
                    <label>Seconds:</label>
                    <input type="number" formControlName="seconds">
                </div>
            </div>
            <div *ngIf="is_ticker_visible()">
                <label for="ticker">Ticker:</label>
                <input type="text" id="ticker" formControlName="ticker"
                    (mouseenter)="setHoveredField('ticker')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_buy_threshold_visible()">
                <label for="buy_threshold">Buy Threshold:</label>
                <input type="text" id="buy_threshold" formControlName="buy_threshold"
                    (mouseenter)="setHoveredField('buy_threshold')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_sell_threshold_visible()">
                <label for="sell_threshold">Sell Threshold:</label>
                <input type="text" id="sell_threshold" formControlName="sell_threshold"
                    (mouseenter)="setHoveredField('sell_threshold')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_timespan_visible()">
                <label for="timespan">Timespan:</label>
                <select formControlName="timespan" id="timespan"
                        (mouseenter)="setHoveredField('timespan')" 
                        (mouseleave)="clearHoveredField()">
                    <option *ngFor="let timespan of timespan_options" [value]="timespan">{{ timespan }}</option>
                </select>   
            </div>
            <div *ngIf="is_window_visible()">
                <label for="window">Window:</label>
                <input type="text" id="window" formControlName="window" 
                    (mouseenter)="setHoveredField('window')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_volume_sensitivity_visible()">
                <label for="volume_sensitivity">Volume Sensitivity:</label>
                <input type="text" id="volume_sensitivity" formControlName="volume_sensitivity"
                    (mouseenter)="setHoveredField('volume_sensitivity')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_selloff_percentage_visible()">
                <label for="selloff_percentage">Selloff Percentage:</label>
                <input type="text" id="selloff_percentage" formControlName="selloff_percentage"
                    (mouseenter)="setHoveredField('selloff_percentage')" 
                    (mouseleave)="clearHoveredField()">
            </div>
            <div *ngIf="is_stoploss_percentage_visible()">
                <label for="stoploss_percentage">Stoploss Percentage:</label>
                <input type="text" id="stoploss_percentage" formControlName="stoploss_percentage"
                    (mouseenter)="setHoveredField('stoploss_percentage')" 
                    (mouseleave)="clearHoveredField()">
            </div>
        </form>

        <button type="button" (click)="send_trader_creation_request()">Create Trader</button>
    </div>
</div> 